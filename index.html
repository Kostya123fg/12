<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üí° –°—Ç–∞–≤–∫–∏ –æ—Ç AI</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            background: linear-gradient(180deg, #1a1f2e 0%, #161b28 100%);
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
        }
        .card {
            background: rgba(30, 41, 59, 0.6);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(51, 65, 85, 0.5);
            border-radius: 12px;
        }
        .upload-container {
            background: #232d3f;
            border: 2px dashed rgba(100, 116, 139, 0.4);
            border-radius: 12px;
            transition: all 0.3s ease;
        }
        .upload-container:hover {
            border-color: rgba(16, 185, 129, 0.5);
        }
        .upload-container.dragover {
            background: rgba(16, 185, 129, 0.1);
            border-color: #10b981;
        }
        .preview-image {
            width: 100%;
            max-height: 180px;
            object-fit: contain;
            border-radius: 8px;
        }
        .btn-primary {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            box-shadow: 0 4px 16px rgba(16, 185, 129, 0.3);
            border: none;
            color: white;
            font-weight: 600;
            font-size: 15px;
            padding: 14px;
            border-radius: 8px;
            width: 100%;
            cursor: pointer;
            transition: all 0.2s;
        }
        .btn-primary:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(16, 185, 129, 0.4);
        }
        .btn-primary:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }
        .spinner {
            border: 2px solid rgba(255,255,255,0.2);
            border-top: 2px solid white;
            border-radius: 50%;
            width: 14px;
            height: 14px;
            animation: spin 0.8s linear infinite;
            display: inline-block;
            margin-left: 6px;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .progress-bar {
            height: 6px;
            background: rgba(16, 185, 129, 0.2);
            border-radius: 3px;
            overflow: hidden;
        }
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #10b981 0%, #34d399 100%);
            border-radius: 3px;
            transition: width 0.6s ease;
        }
        .stat-badge {
            display: inline-block;
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 11px;
            font-weight: 600;
        }
        .confidence-high {
            background: rgba(16, 185, 129, 0.2);
            color: #10b981;
        }
        #analyticsText strong {
            color: #fff;
            font-weight: 600;
        }
        #analyticsText br {
            margin-bottom: 4px;
        }
        .language-selector {
            position: relative;
            cursor: pointer;
        }
        .language-dropdown {
            position: absolute;
            right: 0;
            top: 100%;
            margin-top: 8px;
            background: rgba(30, 41, 59, 0.95);
            border: 1px solid rgba(51, 65, 85, 0.5);
            border-radius: 8px;
            padding: 8px 0;
            min-width: 150px;
            max-height: 300px;
            overflow-y: auto;
            z-index: 1000;
            display: none;
        }
        .language-dropdown.show {
            display: block;
        }
        .language-option {
            padding: 8px 16px;
            cursor: pointer;
            transition: background 0.2s;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .language-option:hover {
            background: rgba(16, 185, 129, 0.1);
        }
        .language-option.active {
            background: rgba(16, 185, 129, 0.2);
        }
    </style>
</head>
<body class="min-h-screen">
    <div class="max-w-md mx-auto px-4 py-4">
        <!-- Header -->
        <div class="flex items-center justify-between mb-5">
            <div class="flex items-center gap-2">
                <span class="text-xl">üí°</span>
                <h1 class="text-emerald-400 text-lg font-bold">–°—Ç–∞–≤–∫–∏ –æ—Ç AI</h1>
            </div>
            <div class="language-selector">
                <div id="currentLang" class="flex items-center gap-2 px-3 py-1 rounded-full" style="background: rgba(30, 41, 59, 0.8);">
                    <span id="langFlag" style="font-size: 14px;">üá∑üá∫</span>
                    <span id="langCode" class="text-gray-300 text-xs font-medium">RU</span>
                </div>
                <div id="langDropdown" class="language-dropdown">
                    <div class="language-option" data-lang="ru">
                        <span>üá∑üá∫</span>
                        <span class="text-gray-300 text-xs">–†—É—Å—Å–∫–∏–π</span>
                    </div>
                    <div class="language-option" data-lang="en">
                        <span>üá¨üáß</span>
                        <span class="text-gray-300 text-xs">English</span>
                    </div>
                    <div class="language-option" data-lang="hi">
                        <span>üáÆüá≥</span>
                        <span class="text-gray-300 text-xs">‡§π‡§ø‡§®‡•ç‡§¶‡•Ä</span>
                    </div>
                    <div class="language-option" data-lang="br">
                        <span>üáßüá∑</span>
                        <span class="text-gray-300 text-xs">Brazilian</span>
                    </div>
                    <div class="language-option" data-lang="es">
                        <span>üá™üá∏</span>
                        <span class="text-gray-300 text-xs">Espa√±ol</span>
                    </div>
                    <div class="language-option" data-lang="uz">
                        <span>üá∫üáø</span>
                        <span class="text-gray-300 text-xs">O'zbek</span>
                    </div>
                    <div class="language-option" data-lang="az">
                        <span>üá¶üáø</span>
                        <span class="text-gray-300 text-xs">Az…ôrbaycan</span>
                    </div>
                    <div class="language-option" data-lang="tr">
                        <span>üáπüá∑</span>
                        <span class="text-gray-300 text-xs">T√ºrk√ße</span>
                    </div>
                    <div class="language-option" data-lang="pt">
                        <span>üáµüáπ</span>
                        <span class="text-gray-300 text-xs">Portugu√™s</span>
                    </div>
                    <div class="language-option" data-lang="ar">
                        <span>üá∏üá¶</span>
                        <span class="text-gray-300 text-xs">ÿßŸÑÿπÿ±ÿ®Ÿäÿ©</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Category -->
        <div class="mb-4">
            <span class="text-gray-300 text-sm">–§—É—Ç–±–æ–ª</span>
        </div>

        <!-- Upload Container -->
        <div id="uploadArea" class="upload-container p-6 mb-4 cursor-pointer">
            <input type="file" id="fileInput" accept="image/*" class="hidden">
            
            <!-- Upload Prompt -->
            <div id="uploadPrompt" class="text-center">
                <svg class="mx-auto h-10 w-10 text-gray-500 mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />
                </svg>
                <p class="text-white text-sm mb-1">üì∏ –ó–∞–≥—Ä—É–∑–∏—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è</p>
                <p class="text-gray-500 text-xs">–ò–ª–∏ –ø—Ä–æ—Å—Ç–æ –≤—Å—Ç–∞–≤—å—Ç–µ —Å–∫—Ä–∏–Ω—à–æ—Ç (Ctrl + V)</p>
            </div>

            <!-- Image Preview -->
            <div id="imagePreview" class="hidden text-center">
                <img id="previewImg" class="preview-image mb-3">
                <button id="changeImageBtn" class="text-emerald-400 text-xs hover:text-emerald-300">
                    üì§ –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –¥—Ä—É–≥–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
                </button>
            </div>
        </div>

        <!-- Analyze Button -->
        <button id="analyzeBtn" class="btn-primary hidden">
            <span id="btnText">üîç –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å—Ç–∞–≤–∫—É</span>
            <span id="btnSpinner" class="spinner hidden"></span>
        </button>

        <!-- Attempts Counter (always visible) -->
        <div id="attemptsInfo" class="text-center text-gray-400 text-xs mt-3 mb-4 hidden">
            –ü–æ–ø—ã—Ç–æ–∫ —Å–µ–≥–æ–¥–Ω—è: <span id="attemptsCounterMain" class="text-emerald-400 font-semibold">10 –∏–∑ 10</span>
        </div>

        <!-- Results Section -->
        <div id="resultsSection" class="hidden">
            <!-- Confidence & Signal -->
            <div class="grid grid-cols-2 gap-3 mb-4">
                <!-- Confidence -->
                <div class="card p-4">
                    <div class="text-gray-400 text-xs mb-1">–£–í–ï–†–ï–ù–ù–û–°–¢–¨ AI</div>
                    <div id="confidenceValue" class="text-white text-2xl font-bold">70%</div>
                </div>
                <!-- Signal -->
                <div class="card p-4">
                    <div class="text-gray-400 text-xs mb-1">–ù–ê–î–ï–ñ–ù–´–ô –°–ò–ì–ù–ê–õ</div>
                    <div id="signalValue" class="text-white text-sm font-semibold leading-tight">–¢–æ—Ç–∞–ª –º–µ–Ω—å—à–µ 2.5</div>
                </div>
            </div>

            <!-- Events Stats -->
            <div class="card p-4 mb-4">
                <div class="text-gray-400 text-xs mb-3">% –°–û–ë–´–¢–ò–ô</div>
                <div id="eventStats" class="space-y-3">
                    <!-- Dynamic stats will be inserted here -->
                </div>
            </div>

            <!-- AI Analytics -->
            <div class="card p-4 mb-4">
                <div class="flex items-center gap-2 mb-3">
                    <span class="text-lg">ü§ñ</span>
                    <h3 class="text-white font-bold text-sm">AI –ê–ù–ê–õ–ò–¢–ò–ö–ê</h3>
                </div>
                <div id="analyticsText" class="text-gray-300 text-xs leading-relaxed"></div>
            </div>

            <!-- Footer -->
            <div class="text-center text-gray-500 text-xs py-4">
                –û—Å—Ç–∞–ª–æ—Å—å –ø–æ–ø—ã—Ç–æ–∫ –Ω–∞ —Å–µ–≥–æ–¥–Ω—è: <span id="attemptsCounter" class="text-white font-semibold">10 –∏–∑ 10</span>
            </div>
        </div>

        <!-- Error Area -->
        <div id="errorArea" class="hidden mt-4">
            <div class="card p-4 border-red-900">
                <p id="errorText" class="text-red-400 text-sm text-center"></p>
            </div>
        </div>
    </div>

    <!-- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–æ–≤ -->
    <script src="js/languages.js?v=1008"></script>
    <script src="js/app.js?v=1008"></script>
</body>
</html>
